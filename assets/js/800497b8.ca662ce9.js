"use strict";(self.webpackChunkzodart_doc=self.webpackChunkzodart_doc||[]).push([[685],{5792:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"defining_schemas/validation","title":"Validation","description":"\u2757\ufe0f Important: Never throw inside a .refine() function \u2014 ZodArt will not catch it.","source":"@site/docs/3-defining_schemas/4-validation.md","sourceDirName":"3-defining_schemas","slug":"/defining_schemas/validation","permalink":"/docs/defining_schemas/validation","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Validation","desctiption":"Data validation","keywords":["valid","validation","refine"],"last_update":{"date":"10/6/2025","author":"Zbynek Zundalek"}},"sidebar":"tutorialSidebar","previous":{"title":"Nullability","permalink":"/docs/defining_schemas/nullability"},"next":{"title":"Value processing","permalink":"/docs/defining_schemas/value_processing"}}');var a=t(4848),o=t(8453);const r={sidebar_position:4,title:"Validation",desctiption:"Data validation",keywords:["valid","validation","refine"],last_update:{date:"10/6/2025",author:"Zbynek Zundalek"}},s=void 0,d={},l=[];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u2757\ufe0f Important: Never throw inside a ",(0,a.jsx)(n.code,{children:".refine()"})," function \u2014 ZodArt will not catch it."]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["In addition to built-in validation methods like ",(0,a.jsx)(n.code,{children:".min()"}),", you can add your own validation logic using the ",(0,a.jsx)(n.code,{children:".refine()"})," method."]}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:".refine()"})," method should return ",(0,a.jsx)(n.code,{children:"true"})," if the value is valid, or ",(0,a.jsx)(n.code,{children:"false"})," otherwise.\nWhen ",(0,a.jsx)(n.code,{children:".refine()"})," returns ",(0,a.jsx)(n.code,{children:"false"}),", ZodArt creates a ",(0,a.jsx)(n.code,{children:"ZIssueCustom"})," issue.\nYou can optionally provide a ",(0,a.jsx)(n.code,{children:"message"})," or ",(0,a.jsx)(n.code,{children:"code"})," to include it in the issue."]}),"\n",(0,a.jsxs)(n.p,{children:["See ",(0,a.jsx)(n.a,{href:"https://github.com/zzundalek/zodart/tree/main/example/refine_method/refine_method.dart",children:"full example"}),"."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u2139\ufe0f To return multiple issues or apply advanced validations use the ",(0,a.jsx)(n.code,{children:".superRefine()"})," ",(0,a.jsx)(n.a,{href:"https://github.com/zzundalek/zodart/tree/main/example/super_refine_method/super_refine_method.dart",children:"method"}),"."]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-dart",children:"import 'package:zodart/zodart.dart';\n\npart 'refine_method.zodart.dart';\npart 'refine_method.zodart.type.dart';\n\n/// Schema defined using ZodArt\n@ZodArt.generateNewClass(outputClassName: 'Person')\nabstract class PersonSchema {\n  /// Validates that:\n  /// - `firstName` is from 1 to 20 characters long\n  /// - `lastName` is from 1 to 30 characters long\n  /// - `validFrom` is a timestamp in seconds\n  /// - `validTo` is an optional timestamp in seconds\n  static final schema = (\n    firstName: ZString().min(1).max(20),\n    lastName: ZString().min(1).max(30),\n    validFrom: ZInt(),\n    validTo: ZInt().optional(),\n  );\n\n  // Access to generated helper methods like props list etc.\n  static const z = _PersonSchemaUtils();\n  static final ZObject<Person> zObject = z.zObject;\n}\n\nvoid main() {\n  // Refine the `personSchema` to ensure that `validFrom` < `validTo`\n  final refinedPersonSchema = PersonSchema.zObject.refine(\n    (person) {\n      final validTo = person.validTo;\n      return validTo == null || person.validFrom < validTo;\n    },\n    message: 'validFrom must be earlier than validTo.',\n  );\n\n  // Parse raw input (e.g. from an API, user form, etc.)\n  // ZodArt infers the type of `result.value` as `Person`\n  final result = refinedPersonSchema.parse({\n    'firstName': 'Zod',\n    'lastName': 'Art',\n    'validFrom': 1749952242,\n    'validTo': 631152000,\n  });\n\n  // Prints the custom error message 'validFrom must be earlier than validTo.'\n  print(result.issueSummary);\n}\n"})})]})}function m(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var i=t(6540);const a={},o=i.createContext(a);function r(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);